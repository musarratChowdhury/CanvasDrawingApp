(()=>{"use strict";var t,e,i,s;!function(t){t[t.fill=0]="fill",t[t.stroke=1]="stroke",t[t.dashedStroke=2]="dashedStroke"}(t||(t={})),function(t){t[t.fill=0]="fill",t[t.stroke=1]="stroke",t[t.dashedStroke=2]="dashedStroke"}(e||(e={})),function(t){t[t.true=0]="true",t[t.false=1]="false"}(i||(i={})),function(t){t[t.FullCircle=2]="FullCircle",t[t.HalfCircle=1]="HalfCircle",t[t.oneFourthCircle=.5]="oneFourthCircle"}(s||(s={}));class l{constructor(t,e,i,s){this.gameCanvas=t,this.width=e,this.height=i,this.backColor=s,this._ctx=this.gameCanvas.getContext("2d"),this.gameCanvas.width=this.width,this.gameCanvas.height=this.height,this.gameCanvas.style.backgroundColor=this.backColor}get Width(){return this.gameCanvas.width}get Height(){return this.gameCanvas.height}setFillStyle(t){this.ctx&&(this.ctx.fillStyle=t)}get ctx(){return this._ctx}SaveState(){var t;null===(t=this.ctx)||void 0===t||t.save()}RestoreState(){var t;null===(t=this.ctx)||void 0===t||t.restore()}TakeSnapShot(){var t,e;return this.snapshot=null===(t=this.ctx)||void 0===t?void 0:t.getImageData(0,0,this.Width,this.Height),null===(e=this.ctx)||void 0===e?void 0:e.getImageData(0,0,this.Width,this.Height)}restoreSnapShot(){var t;null===(t=this.ctx)||void 0===t||t.putImageData(this.snapshot,0,0)}restorePrevSnapShot(t){var e;null===(e=this.ctx)||void 0===e||e.putImageData(t,0,0)}Count(){return l._rectCount++}ClearCanvas(){this.SaveState(),this.drawRectangle(0,0,this.gameCanvas.width,this.gameCanvas.height,this.gameCanvas.style.backgroundColor),this.RestoreState()}grid(t,e){this.SaveState();let i=this.gameCanvas.getBoundingClientRect(),s=i.width/t,l=i.height/e;for(var a=0;a<=0+t*l;a+=l)this.lineDrawing(0,a,0+e*s,a,1,"grey","square","round",{x:5,y:5});for(var h=0;h<=0+e*s;h+=s)this.lineDrawing(h,0,h,0+t*l,1,"grey","square","round",{x:5,y:5});this.RestoreState()}draw(t,e,i){this.ctx&&(t&&e&&i?(this.ctx.fillStyle=t,this.ctx.strokeStyle=e,this.ctx.lineWidth=i):(this.ctx.fillStyle="blue",this.ctx.strokeStyle="black",this.ctx.lineWidth=4),this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.strokeRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height))}drawMousePos(t,{drawText:e=!1}){var i;null!=this.ctx&&(this.ctx.fillStyle="black"),null!=this.ctx&&(this.ctx.font="normal bold 2em courier");var s=t.clientX-this.gameCanvas.getBoundingClientRect().left,l=t.clientY-this.gameCanvas.getBoundingClientRect().top;if(!e)return{x:s,y:l};var a=s.toFixed(2)+","+l.toFixed(2);this.ClearCanvas(),null===(i=this.ctx)||void 0===i||i.fillText(a,100,200)}getMousePos(t){return{x:t.clientX-this.gameCanvas.getBoundingClientRect().left,y:t.clientY-this.gameCanvas.getBoundingClientRect().top}}drawRectangle(t,e,i,s,l){var a,h;this.SaveState(),null!=this.ctx&&(this.ctx.fillStyle=l),null===(a=this.ctx)||void 0===a||a.fillRect(t,e,i,s),this.Count(),null!=this.ctx&&(this.ctx.strokeStyle="black"),null!=this.ctx&&(this.ctx.lineWidth=2),null===(h=this.ctx)||void 0===h||h.strokeRect(t,e,i,s),this.RestoreState()}drawDashedRect(t,e,i,s){var l,a;this.SaveState(),null===(l=this.ctx)||void 0===l||l.setLineDash([5,5]),null!=this.ctx&&(this.ctx.strokeStyle="black"),null!=this.ctx&&(this.ctx.lineWidth=1),null===(a=this.ctx)||void 0===a||a.strokeRect(t,e,i,s),this.RestoreState()}drawShadow(t,e,i,s){null!=this.ctx&&(this.ctx.shadowColor=t),null!=this.ctx&&(this.ctx.shadowOffsetX=e),null!=this.ctx&&(this.ctx.shadowOffsetY=i),null!=this.ctx&&(this.ctx.shadowBlur=s)}lineDrawing(t,e,i,s,l,a,h,n,c){var r,o,d,u;this.SaveState(),n?null!=this.ctx&&(this.ctx.lineJoin=n):null!=this.ctx&&(this.ctx.lineJoin="round"),h?null!=this.ctx&&(this.ctx.lineCap=h):null!=this.ctx&&(this.ctx.lineCap="round"),c&&null!=this.ctx&&this.ctx.setLineDash([c.x,c.y]),null!=this.ctx&&(this.ctx.lineWidth=l),null!=this.ctx&&(this.ctx.strokeStyle=a),null===(r=this.ctx)||void 0===r||r.beginPath(),null===(o=this.ctx)||void 0===o||o.moveTo(t,e),null===(d=this.ctx)||void 0===d||d.lineTo(i,s),null===(u=this.ctx)||void 0===u||u.stroke(),this.RestoreState()}circleDrawing(e,i,s,l,a,h,n,c,r,o,d){var u,x,g,S,v,w,y;this.SaveState(),null===(u=this.ctx)||void 0===u||u.beginPath(),null===(x=this.ctx)||void 0===x||x.arc(e,i,s,l,a*Math.PI,r),o&&null!=this.ctx&&(this.ctx.lineWidth=o),d&&null!=this.ctx&&(this.ctx.strokeStyle=d),t.dashedStroke&&(null===(g=this.ctx)||void 0===g||g.setLineDash([5,5])),t.fill&&n&&(null!=this.ctx&&(this.ctx.fillStyle=n),null===(S=this.ctx)||void 0===S||S.fill()),(t.stroke||t.dashedStroke&&c)&&(null!=this.ctx&&(this.ctx.strokeStyle=c),null===(v=this.ctx)||void 0===v||v.stroke()),null===(w=this.ctx)||void 0===w||w.stroke(),null===(y=this.ctx)||void 0===y||y.closePath(),this.RestoreState()}drawPath(t,e,i,s,l,a){var h,n,c,r,o,d;null!=this.ctx&&(this.ctx.strokeStyle="blue"),null!=this.ctx&&(this.ctx.fillStyle="red"),null!=this.ctx&&(this.ctx.lineWidth=5),null===(h=this.ctx)||void 0===h||h.beginPath(),null===(n=this.ctx)||void 0===n||n.moveTo(t,e),null===(c=this.ctx)||void 0===c||c.lineTo(i,s),null===(r=this.ctx)||void 0===r||r.lineTo(l,a),null===(o=this.ctx)||void 0===o||o.fill(),null===(d=this.ctx)||void 0===d||d.stroke()}drawCurves(t){}drawText(t,e,i,s,l,a,h,n){var c,r,o,d;s&&null!=this.ctx&&(this.ctx.font=`${s.fontSize}px ${s.fontFamily}`),null!=this.ctx&&(this.ctx.fillStyle=l),this.SaveState(),null!=this.ctx&&(this.ctx.strokeStyle=a),null!=this.ctx&&this.ctx.fillText(t,e,i),a&&(null===(c=this.ctx)||void 0===c||c.strokeText(t,e,i)),null!=this.ctx&&(this.ctx.textAlign=n),this.RestoreState(),h&&(null===(r=this.ctx)||void 0===r||r.beginPath(),null!=this.ctx&&(this.ctx.strokeStyle="black"),null!=this.ctx&&(this.ctx.lineWidth=2),null===(o=this.ctx)||void 0===o||o.moveTo(e,i+5),null===(d=this.ctx)||void 0===d||d.stroke())}}l._rectCount=0;class a extends l{constructor(t,e,i,s){super(t,e,i,s),this.gameCanvas=t,this.width=e,this.height=i,this.backColor=s,this.dragStartLocation={x:0,y:0},this.dragging=!1}drawLine(t){this.lineDrawing(this.dragStartLocation.x,this.dragStartLocation.y,t.x,t.y,2,"black")}dragStart(t){this.dragging=!0,this.dragStartLocation=this.getMousePos(t),this.TakeSnapShot()}drag(t){let e;this.dragging&&(this.restoreSnapShot(),e=this.getMousePos(t),this.drawLine(e))}dragStop(t){this.dragging=!1,this.restoreSnapShot();var e=this.getMousePos(t);this.drawLine(e)}}class h{constructor(t,e,i,s,l,a,h,n,c){this.ctx=t,this.x=e,this.y=i,this.radius=s,this.startAngle=l,this.endAngle=a,this.fillcolor=h,this.strokecolor=n,this.circleStatus=c,this.lineWidth=1,this.strokeStyle="black"}draw(){this.ctx.fillStyle=this.fillcolor,this.ctx.strokeStyle=this.strokeStyle,this.ctx.lineWidth=this.lineWidth,this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle*Math.PI,!1),this.ctx.fill(),this.ctx.stroke(),this.ctx.closePath()}}document.querySelector("#container");const n=document.querySelector("#game-canvas"),c=(document.querySelector(".count-display"),document.querySelector("#color")),r=(document.querySelector("#lineWidth"),document.querySelector("#clearButton"),document.querySelector("#paint-bucket")),o=document.querySelector("#circle-dashed"),d=document.querySelector("#circle-fill"),u=document.querySelector(".undo-btn"),x=document.querySelector("#square-dashed"),g=document.querySelector(".button-box");let S=!1,v=!1,w=[],y=0,C=[];var k=new l(n,1*window.innerWidth,.7*window.innerHeight,"white");k.draw("gray","black",4),k.drawRectangle(22,22,100,50,"tomato"),k.SaveState(),k.drawRectangle(44,44,100,50,"magenta"),k.RestoreState(),k.drawRectangle(66,66,100,50,"blue");let f=new class{constructor(t,e,i){this.ctx=t,this.x=e,this.y=i,this.ctx.beginPath(),this.ctx.lineTo(e,i)}AddPoint(t,e){this.ctx.lineTo(t,e)}fillPath(t){this.ctx.fillStyle=t,this.ctx.fill()}closePath(){this.ctx.closePath()}}(k.ctx,100,200);f.AddPoint(100,500),f.AddPoint(300,600),f.AddPoint(400,100),f.fillPath("tomato"),k.ClearCanvas(),k.grid(10,10);let m=new class extends a{constructor(t,e,i,s){super(t,e,i,s),this.gameCanvas=t,this.width=e,this.height=i,this.backColor=s,this.dragging=!1,this.dragStartLocation={x:0,y:0},this.rectangleData={x:0,y:0,width:0,height:0},this.circleData={x:0,y:0,rad:0},this.drawCircleToggle=!1}drawCircle(e){let i=Math.sqrt(Math.pow(e.x-this.dragStartLocation.x,2)+Math.pow(e.y-this.dragStartLocation.y,2));this.circleDrawing(e.x,e.y,i,0,s.FullCircle,t.dashedStroke,"","black",!1,1,"black"),this.circleData={x:e.x,y:e.y,rad:i}}drawRect(t){let e=this.dragStartLocation.x-t.x,i=this.dragStartLocation.y-t.y;this.drawDashedRect(t.x,t.y,e,i),this.rectangleData={x:t.x,y:t.y,width:e,height:i}}dragStart(t){this.dragging=!0,this.dragStartLocation=this.getMousePos(t),this.TakeSnapShot()}drag(t){let e;this.dragging&&(this.restoreSnapShot(),e=this.getMousePos(t),this.drawCircleToggle?this.drawCircle(e):this.drawRect(e))}dragStop(t){this.dragging=!1,this.restoreSnapShot();var e=this.getMousePos(t);this.drawCircleToggle?this.drawCircle(e):this.drawRect(e)}fillCurrentPath(){var t,e;this.drawCircleToggle?null===(t=this.ctx)||void 0===t||t.fill():null===(e=this.ctx)||void 0===e||e.fillRect(this.rectangleData.x,this.rectangleData.y,this.rectangleData.width,this.rectangleData.height),console.log("fill called")}}(n,1*window.innerWidth,.7*window.innerHeight,"white");function p(){Array.from(g.children).forEach((t=>{t.classList.contains("selected")&&t.classList.remove("selected")}))}n.addEventListener("mousedown",(t=>{S||(y>=1&&!v&&(k.restoreSnapShot(),y=0),k.TakeSnapShot(),m.dragStart(t),y++,v=!1)})),n.addEventListener("mousemove",(t=>{S||m.drag(t)})),n.addEventListener("mouseup",(t=>{S||m.dragStop(t)})),null==r||r.addEventListener("click",(()=>{p(),r.classList.add("selected"),S=!0,k.setFillStyle(c.value),console.log(c.value)})),n.addEventListener("mousedown",(t=>{k.setFillStyle(c.value),S&&(k.restoreSnapShot(),m.fillCurrentPath(),v=!0,C.push(k.TakeSnapShot()),console.log(C))})),null==o||o.addEventListener("click",(()=>{p(),o.classList.add("selected"),S=!1,m.drawCircleToggle=!0})),null==x||x.addEventListener("click",(()=>{p(),x.classList.add("selected"),(null==r?void 0:r.classList.contains("selected"))&&r.classList.remove("selected"),S=!1,m.drawCircleToggle=!1})),null==d||d.addEventListener("click",(()=>{d.classList.add("selected"),S=!1,w.push(new h(n.getContext("2d"),100,200,30,0,s.FullCircle,"red")),w.forEach((t=>{t.draw()})),console.log(w[0].x)})),null==u||u.addEventListener("click",(()=>{p(),C.pop(),0!=C.length?k.restorePrevSnapShot(C[C.length-1]):k.ClearCanvas(),u.classList.add("selected")}))})();